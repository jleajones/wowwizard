var Theme=function(){function e(){this._allowedColorSchemas=["pomegranate","blueberry"],this._allowedStyleSchemas=["material"],this._defaultColorSchema="pomegranate",this._defaultStyleSchema="material",this._styles={},this._colors={},this.selectColorSchema(this._defaultColorSchema),this.selectStyleSchema(this._defaultStyleSchema),this.addPredefinedColorAndStyles()}return e.construct=function(){return e._instance},e.prototype.setWizard=function(e){this._wizard=e},e.prototype.addColorSchema=function(e,t){this._colors[e]=t},e.prototype.addStyleSchema=function(e,t){this._styles[e]=t},e.prototype.selectColorSchema=function(e){this._selectedColorSchema=this._colors[e]},e.prototype.selectStyleSchema=function(e){this._selectedStyleSchema=this._styles[e]},e.prototype.getSelectedColorSchema=function(){return this._selectedColorSchema},e.prototype.getSelectedStyleSchema=function(){return this._selectedStyleSchema},e.prototype.apply=function(e){var t=this._wizard.settings.theme,i=this._wizard.settings.style;t?this._allowedColorSchemas.indexOf(t)===-1?(this._wizard.warning("Theme choice "+t+" doesn't exist in the plugin."),this.selectColorSchema(this._defaultColorSchema)):this.selectColorSchema(t):(this._wizard.warning("You should specify a custom theme of your taste."),this.selectColorSchema(this._defaultColorSchema)),i?this._allowedStyleSchemas.indexOf(i)===-1?(this._wizard.warning("Style choice "+i+" doesn't exist in the plugin."),this.selectStyleSchema(this._defaultStyleSchema)):this.selectStyleSchema(i):(this._wizard.warning("You should specify a custom style of your taste."),this.selectStyleSchema(this._defaultStyleSchema));var o=this.getSelectedColorSchema();this.getSelectedStyleSchema();e.find(".wow-wizard-step-indicator.visited .step-id").css("background-color",o.circleColor),e.find(".wow-wizard-step-indicator").css("color",o.activeIndicatorTextColor),e.find(".wow-wizard-step-indicator.visited").css("background-color",o.activeIndicatorBackgroundColor),e.find(".wow-wizard-step-indicator").filter(function(e){return!$(this).hasClass("visited")}).css("color",o.textColor),e.find(".wow-wizard-step-indicators").css("border-bottom","2px solid "+o.lineColor),e.find("#wow-wizard-next-step, .single-choice-button").css("background-color",o.activeButtonBackgroundColor),e.find("#wow-wizard-next-step, .single-choice-button").css("color",o.buttonTextColor),e.find(".multiple-image-choice .circle-select .background").css("background-color",o.imageChoiceCircleBackgroundColor),e.find(".multiple-image-choice, .multiple-image-choice .circle-select").css("border","2px solid "+o.imageChoiceBorderColor),e.find(".fancy-checkbox .button").css("background-color",o.passiveButtonBackgroundColor),e.find(".fancy-checkbox .button.active").css("background-color",o.activeButtonBackgroundColor),e.find(".multiple-image-choice .circle-select .background").css("background-color"),e.find(".input-col-6 .star-icon").css("color",o.outlineColor),e.find("input[type=text], textarea").css("outline","none"),e.find("input[type=text]:focus, textarea:focus").css({border:"2px solid "+o.outlineColor,"box-shadow":"0px 0px 5px 0px rgba(244,74,85,1);"}),e.find("input[type=text], input[type=email], textarea").focus(function(){$(this).css({border:"1px solid "+o.outlineColor,"-webkit-box-shadow":"0px 0px 5px 0px "+o.outlineColor,"box-shadow":"0px 0px 5px 0px "+o.outlineColor})}),e.find("input[type=text], input[type=email], textarea").blur(function(){$(this).css({border:"1px solid #BBB","-webkit-box-shadow":"none"})}),this._wizard.settings.style&&e.find("input, textarea, button, #wow-wizard-next-step, .multiple-image-choice, .single-choice-button, .wow-wizard-step-indicator, #wow-alert").css("border-radius",this.getSelectedStyleSchema().borderRadius),e.find(".loader").css("background-image","url('"+this._wizard.settings.loader+"')")},e.prototype.addPredefinedColorAndStyles=function(){var e={activeIndicatorBackgroundColor:"#F44A56",activeIndicatorTextColor:"#FFF",questionAndAnswerTextColor:"#69181E",circleColor:"#C23640",outlineColor:"#F44A56",lineColor:"#F44A56",activeButtonBackgroundColor:"#F44A56",passiveButtonBackgroundColor:"#FFF",activeButtonTextColor:"#FFF",passiveButtonTextColor:"#000",buttonTextColor:"#FFF",imageChoiceBorderColor:"#F44A56",imageChoiceCircleBackgroundColor:"#FFB3B8",textColor:"#FFF"};this.addColorSchema("pomegranate",e);var t={activeIndicatorBackgroundColor:"#4068D6",activeIndicatorTextColor:"#FFF",questionAndAnswerTextColor:"#69181E",circleColor:"#204ABD",outlineColor:"#4068D6",lineColor:"#4068D6",activeButtonBackgroundColor:"#4068D6",passiveButtonBackgroundColor:"#FFF",activeButtonTextColor:"#FFF",passiveButtonTextColor:"#000",buttonTextColor:"#FFF",imageChoiceBorderColor:"#4068D6",imageChoiceCircleBackgroundColor:"#A2B5EB",textColor:"#FFF"};this.addColorSchema("blueberry",t);var i={borderRadius:"0.2px"};this.addStyleSchema("material",i)},e._instance=new e,e}(),CheckboxBeautifier=function(){function e(e){this._settings={on:{icon:"glyphicon glyphicon-check"},off:{icon:"glyphicon glyphicon-unchecked"}},this._theme=e}return e.prototype.update=function(){this.sync()},e.prototype.selectButton=function(e){this.sync(),e.triggerHandler("click")},e.prototype._updateDisplay=function(e,t){var i=t.is(":checked"),o=i?"on":"off",a=this._settings[o];e.data("state",o),e.find(".state-icon").removeClass().addClass("state-icon "+a.icon),i?e.addClass("active").css("background-color",this._theme.getSelectedColorSchema().activeButtonBackgroundColor).css("color",this._theme.getSelectedColorSchema().activeButtonTextColor):e.removeClass("active").css("background-color",this._theme.getSelectedColorSchema().passiveButtonBackgroundColor).css("color",this._theme.getSelectedColorSchema().passiveButtonTextColor)},e.prototype.sync=function(){var e=this;$(".fancy-checkbox").each(function(t,i){var o=$(i),a=o.find("button"),s=o.find("input:checkbox");a.data("color");a.unbind().on("click",function(){s.data("checked",!s.is(":checked")),s.prop("checked",!s.is(":checked")),e._updateDisplay(a,s)}),s.on("change",function(){e._updateDisplay(a,s)}),e._updateDisplay(a,s),0==a.find(".state-icon").length&&a.prepend('<i class="state-icon '+e._settings[a.data("state")].icon+'"></i>Â ')})},e}();!function(e){e.fn.wowWizard=function(t){function i(){var e=w.settings.steps[_];if(e.isDependent&&(e=o(e)),!e)throw new Error("Wrong dependency accross the steps.");if(!y.isStepTypeAllowed(e))throw new Error("Step type is not allowed: "+e.type);var t=u(e);w.html(t).find(".wow-wizard-content").css("opacity","0"),a(e,t),v.apply(t);var i="multiple_image_choice"==e.type?1e3:300;setTimeout(function(){w.find(".wow-wizard-content").animate({opacity:1},500),w.find(".loader").fadeOut(200)},i),l(e),w.checkboxBeautifier.update()}function o(e){for(var t=0;t<e.steps.length;t++){var i=e.steps[t],o=w.settings.steps[i.triggerStep];if(o.given_answer==i.triggerAnswer)return i}}function a(t,i){var o=i.find(".wow-wizard-step-indicator");o.each(function(t){var i=e(this).data("step");b>i&&e(this).find(".step-id").html('<div class="check"></div>'),_==i&&e(this).addClass("visited"),e(this).click(function(){r(e(this))})});var a=i.find("#wow-alert");a.fadeOut(0);var n=i.find("#wow-wizard-next-step");if(n.click(function(){s()}),e("div.single-choice-button").click(function(){e(this).data("selected",!0),e(this).data("selected"),s()}),"form"==t.type&&e(w).bind("keypress",function(e){var t=e.keyCode||e.which;13==t&&s()}),"multiple_image_choice"==t.type){var c=w.find(".multiple-image-choice");c.each(function(t){var i=e(this);i.data("isAvailable",!0),i.click(function(){i.data("selected")?f("multiple_image_choice",i):p("multiple_image_choice",i)})})}}function s(){var e=w.settings.steps[_];return e.isDependent&&(e=o(e)),!!n(e)&&(++_>=w.settings.steps.length?(_--,d()):(_>b&&b++,i(),w.settings.onNextStep()),!0)}function n(t){var i;switch(t.type){case"single_choice":return w.find(".single-choice-button").each(function(){e(this).data("selected")&&(r=e(this).data("value"))}),t.given_answer=r,y.debug&&console.log(t.given_answer),!0;case"multiple_choice":var o=[];return w.find(".multiple-choice-choice").each(function(){e(this).hasClass("active")&&o.push(e(this).data("value"))}),0==o.length?(console.log(w.settings.errors.multiple_choice),i=t.errors&&t.errors.required?t.errors.required:w.settings.errors.multiple_choice.required,c(t,i)):(t.given_answer=o,y.debug&&console.log(t.given_answer),!0);case"form":var a=w.find("input"),o=[],s=!1;return a.each(function(a){if(""!=e(this).val())o[a]=e(this).val();else if(e(this).data("required"))return s=!0,i=t.errors&&t.errors.required?t.errors.required:w.settings.errors.form.required,e(this).css("border-color","red"),!0;if("email"==e(this).attr("type")){var n=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return n.test(e(this).val())||(s=!0,e(this).css("border-color","red"),i=t.errors&&t.errors.email?t.errors.email:w.settings.errors.form.email),!0}}),t.given_answer=o,y.debug&&console.log(t.given_answer),!s||c(t,i);case"multiple_image_choice":var o=[],n=w.find(".multiple-image-choice");return n.each(function(){e(this).data("selected")&&o.push(e(this).data("slug"))}),0!=o.length?(t.given_answer=o,y.debug&&console.log(t.given_answer),!0):(i=t.errors&&t.errors.required?t.errors.required:w.settings.errors.multiple_image_choice.required,c(t,i));case"textarea":var r=e("textarea").val();return r?t.given_answer=r:t.given_answer="",y.debug&&console.log(t.given_answer),!0}}function r(e){var t=e.data("step");if(!(t>b||_==t)){w.settings.steps[t];_=t,i(),w.settings.onPrevStep()}}function c(e,t){var i=w.find("#wow-alert");return i.html(t),i.fadeIn(300),setTimeout(function(){i.fadeOut(300)},1500),!1}function l(t){if(t.given_answer)switch(t.type){case"single_choice":e(".single-choice-button").each(function(){t.given_answer==e(this).data("value")&&e(this).find("i").fadeIn(200)});break;case"multiple_choice":e(".fancy-checkbox").each(function(){var i=e(this).find("button");t.given_answer.indexOf(i.data("value"))!=-1&&w.checkboxBeautifier.selectButton(i)});break;case"form":e("input").each(function(i){t.given_answer[i]&&e(this).val(t.given_answer[i])});break;case"multiple_image_choice":var i=w.find(".multiple-image-choice");i.each(function(i){if(t.given_answer.indexOf(e(this).data("slug"))!=-1){var o=e(this);o.data("isAvailable",!0),p("multiple_image_choice",o)}});break;case"textarea":w.find("textarea").val(t.given_answer)}}function d(){w.html(h());var t={};e.each(w.settings.steps,function(e,i){var o=i.given_answer,a=i.name;if(i.isDependent)for(var s=0;s<i.steps.length;s++){var n=i.steps[s];if(n.given_answer){o=n.given_answer,a=n.name;break}}t[a]=o}),w.settings.onFinish(t)}function u(t){var i,o=e('<div class="wow-wizard-step" type="'+t.type+'"></div>');if(t.notes){i=e('<div class="col-xs-9 wow-wizard-content"></div>');var a=e('<div class="col-xs-3 wow-wizard-content"></div>');a.html(t.notes),o.append(a)}else i=e('<div class="col-xs-12 wow-wizard-content"></div>');o.append(e('<div class="loader"></div>'));var s=e('<div class="wow-wizard-step-question"></div>');s.append(e('<h2 class="wow-wizard-step-question-title">'+t.questionTitle+"</h2>")),t.questionDescription?s.append(e('<p class="wow-wizard-step-question-description">'+t.questionDescription+"</p>")):null;var n=e('<div class="wow-wizard-step-answers"></div>');switch(t.type){case"single_choice":e.each(t.answers,function(i,o){n.append(e('<div class="single-choice-button" data-name="'+t.name+'" data-value="'+o.value+'"><i class="fa fa-check"></i>'+o.text+"</div>"))});break;case"multiple_choice":try{var r=e('<div class="multiple-choice-choices"></div>');e.each(t.answers,function(t,i){var o=e('<span class="fancy-checkbox"></span>');o.append(e('<button type="button" data-value="'+i.value+'" class="button multiple-choice-choice" data-checked="false" style="margin-right:10px;" data-color="info">'+i.text+"</button>")),o.append(e('<input style="display:none;" type="checkbox" name="'+i.value+'">')),r.append(o)}),n.append(r)}catch(c){console.log(c)}break;case"form":try{for(var l=e('<div class="input-row"></div>'),d=0;d<t.inputs.length;d++){var u=t.inputs[d],h=e('<input class="pull-left" name="'+u.name+'" type="'+u.type+'">');u.placeholder?h.attr("placeholder",u.placeholder):null;var p=e('<div class="input-col-6"></div>');p.append(h),u.required&&(p.prepend(e('<div class="star-icon">*</div>')),h.data("required",!0)),l.append(p)}n.append(l)}catch(c){throw new Error('Input array of a step type "form" cannot be empty.')}break;case"multiple_image_choice":try{for(var f=e('<div class="multiple-image-choices"></div>'),d=0;d<t.answers.length;d++){var g=t.answers[d],v=e('<div class="multiple-image-choice" data-slug="'+g.value+'"></div>'),m=e('<div class="multiple-image-container" style="background-image:url(\''+g.imageUrl+"')\"/>"),_=e("<p>"+g.text+"</p>"),b=e('<div class="circle-select"><div class="background"></div><div class="inner-circle-icon"></div></div>');v.append(m),v.append(_),v.append(b),f.append(v)}n.append(f)}catch(c){console.log(c.message)}break;case"textarea":n.append('<textarea name="'+t.name+'"></textarea>')}i.append(s),i.append(n),y.shouldHaveNextButton(t)&&i.append(e('<div id="wow-wizard-next-step" class="pull-right">'+w.settings.nextButtonText+"</div>")),i.append(e('<div id="wow-alert" style="display:none;"></div>'));for(var x=e('<div class="wow-wizard-step-indicators col-xs-12"></div>'),d=0;d<w.settings.steps.length;d++){var C=e('<div class="wow-wizard-step-indicator" data-step="'+d+'"><div class="step-id"><span>'+(d+1)+"</span></div><b>"+w.settings.steps[d].indicatorName+"</b></div>");x.append(C)}return o.prepend(i),o.prepend(x),o}function h(){var t=e('<div class="wow-wizard-last-step"><h1>Thanks for using WowWizard!</h1><p>We\'ve got all your information. Will reach you soon.</p><a href="#">RETURN HOME</a></div>');return t}function p(e,t){if(t.data("isAvailable"))switch(e){case"room_choice":if(t.data("isCustom")||t.data("isAvailable",!1),t.css("color","white"),t.find("i").fadeIn(200,function(){t.data("isAvailable",!0),t.data("selected",!0)}),t.animate({backgroundColor:"#59BAFF"},200,null),t.data("isCustom")){var i=t.find("input");i.css("color","white"),i.css("border-bottom","1px solid white")}break;case"multiple_image_choice":t.find(".circle-select").addClass("selected"),t.find(".circle-select .background").fadeIn(200),t.find(".circle-select .inner-circle-icon").fadeIn(200),t.data("selected",!0)}}function f(e,t){if(t.data("isAvailable"))switch(e){case"room_choice":t.data("isCustom")||t.data("isAvailable",!1),t.css("color","#59BAFF"),t.animate({backgroundColor:"transparent"},200,null),t.find("i").fadeOut(200,function(){t.data("isAvailable",!0),t.data("selected",!1)}),t.data("isCustom")&&(t.find("input").css("color","#59BAFF"),t.find("input").css("border-bottom","1px solid #59BAFF"));break;case"multiple_image_choice":t.find(".circle-select").removeClass("selected"),t.find(".circle-select .background").fadeOut(200),t.find(".circle-select .inner-circle-icon").fadeOut(200),t.data("selected",!1)}}var g={steps:[],theme:"pomegranate",loader:"../../img/loader.gif",errors:{form:{required:"You have to fill in all required fields.",email:"Wrong e-mail format."},multiple_choice:{required:"You have to choose at least one of the choices."},single_choice:{required:"You have to fill in all required fields."}},onNextStep:function(){},onPrevStep:function(){},onFinish:function(e){}};e.fn.wowWizard.defaults=g;var v=Theme.construct();v.setWizard(this),this.warning=function(e){console.error("Warning: "+e)};var m=e.extend({},e.fn.wowWizard.defaults,t);m.errors=e.extend({},e.fn.wowWizard.defaults.errors,t.errors),this.settings=m;var w=this;w.checkboxBeautifier=new CheckboxBeautifier(v),console.log(this.settings);var y=function(){var e={shouldHaveNextButton:["form","multiple_choice","multiple_image_choice","textarea"],allowedStepTypes:["single_choice","form","multiple_choice","multiple_image_choice","textarea"]};return{shouldHaveNextButton:function(t){return e.shouldHaveNextButton.indexOf(t.type)!=-1},isStepTypeAllowed:function(t){return e.allowedStepTypes.indexOf(t.type)!=-1},debug:!1}}(),_=0,b=0;return i(),w.update=function(){i()},w}}(jQuery);